{
    "contents" : "\nrequire(\"dplR\")\n\n# #test\n# test<-read.rwl(\"data/3200m.rwl\")\n\n# #NO PITH ALTERNATIVE TO NORMAL RINGS LOOKS LIKE THEY CROSS DATE A LITTLE WORSE BUT SOME OF THE RINGS WERE RIDICULOUSLY PLACED ON Star pith formation and middle of pith\nrings3200m<-read.rwl(\"data/3200m_w_o_pith_rings.rwl\",format = \"tucson\")\nrings3500m<-read.rwl(\"data/3500m_w_o_pith_rings.rwl\",format = \"tucson\")\nrings3800m<-read.rwl(\"data/3800m_w_o_pith_rings.rwl\",format = \"tucson\")\n\n# ## original rings with pith\n# \n# rings3200m<-read.rwl(\"data/3200m.rwl\")\n# rings3500m<-read.rwl(\"data/3500m.rwl\")\n# rings3800m<-read.rwl(\"data/3800m.rwl\")\n\n# write.csv(rings3800m,\"White Mountains Artemisia Rings 3800m.csv\")\n# write.csv(rings3500m,\"White Mountains Artemisia Rings 3500m.csv\")\n# write.csv(rings3200m,\"White Mountains Artemisia Rings 3200m.csv\")\n#plyr::ddply(chrons,.(Year,Ring.Width.Index),summarise,average=               chrons[\"Species\"]<-c(\"\")           \n\n# do a ring curve standarsization which is for preserving climate trends that are longer than the length of one chronology by not dividing by a series curve but the mean size of a ring width given its age.\nrings3200mrcs<-rcs(rwl=rings3200m,po=data.frame(series=names(rings3200m), offset=c(4,4,1,1,6,6,4,4,5,5,4,4,18,18,1,1,1,1,1,1)))# Took 8a outlier out so that it is 20 instead of 21 samples po data taken from Jeff's plant and soil folder on google drive > data for ms> White Mountains Artemisia 3200m,3500m and 3800m\nrings3500mrcs<-rcs(rwl=rings3500m,po=data.frame(series=names(rings3500m),offset=1)) # pith on all of 3500m samples\nrings3800mrcs<-rcs(rwl= rings3800m, po=data.frame(series=names(rings3800m),offset=1)) #pith on all of 3200m samples\n\n# Visually check rings\nplot(rings3200m,plot.type=\"spag\")\nplot(rings3200mrcs,plot.type=\"spag\")\nplot(rings3500m,plot.type=\"spag\") \nplot(rings3500mrcs,plot.type=\"spag\")\nplot(rings3800m,plot.type=\"spag\")\nplot(rings3800mrcs,plot.type=\"spag\")\n\n\nChronMaker<-function(rings3200m,elevation,detrend=FALSE, method=\"ModNegExp\", rcs=FALSE){\n  if(detrend){\n    # detrend become the input value for the rest of the function\n    rings3200m<-detrend(rings3200m,method=method, verbose=FALSE,make.plot = FALSE)\n  }\n  # rings3200m chron32 is just a vesitigual name to make debuging easier. they can contain data from any elevation\n  chron32<-chron(rings3200m,prefix=\"\")\n  # Rename data column\n  names(chron32)[1]<-\"Ring.Width.Index\"\n  # Create Source column\n  chron32$Source<-rep(elevation,length(chron32[,1]))\n  # create Year column\n  chron32$Year<-as.numeric(rownames(chron32))\n  # rearrange columns so samp.depth is on the end\n  chron32<-chron32[c(\"Ring.Width.Index\",\"Source\",\"Year\",\"samp.depth\")]\n  \n  return(chron32)\n}\n#none detrened\nchron32<-ChronMaker(rings3200m,\"3200m radial growth\")#This many: \"                                                                            \"spaces to align the white mountain Precip and growth graphs\nchron35<-ChronMaker(rings3500m,\"3500m radial growth\")\nchron38<-ChronMaker(rings3800m,\"3800m radial growth\")\nchrons<-Reduce(function(x,y) rbind(x,y),list(chron32,chron35,chron38))\n\n#neg exponential detrend\nchron32<-ChronMaker(rings3200m,\"3200m radial growth\",detrend=TRUE,method = \"ModNegExp\")#This many: \"                                                                            \"spaces to align the white mountain Precip and growth graphs\nchron35<-ChronMaker(rings3500m,\"3500m radial growth\",detrend=TRUE,method = \"ModNegExp\")\nchron38<-ChronMaker(rings3800m,\"3800m radial growth\",detrend=TRUE,method = \"ModNegExp\")\nchronsNeg<-Reduce(function(x,y) rbind(x,y),list(chron32,chron35,chron38))\n\n# autoregressive detrend\nchron32<-ChronMaker(rings3200m,\"3200m radial growth\",detrend=TRUE,method = \"Ar\")#This many: \"                                                                            \"spaces to align the white mountain Precip and growth graphs\nchron35<-ChronMaker(rings3500m,\"3500m radial growth\",detrend=TRUE,method = \"Ar\")\nchron38<-ChronMaker(rings3800m,\"3800m radial growth\",detrend=TRUE,method = \"Ar\")\nchronsAr<-Reduce(function(x,y) rbind(x,y),list(chron32,chron35,chron38))\n \n# regional curve standardization (cambial age dependent stadardization)\nchron32rcs<-ChronMaker(rings3200mrcs,\"3200m radial growth\")#This many: \"\nchron35rcs<-ChronMaker(rings3500mrcs,\"3500m radial growth\")#This many: \"\nchron38rcs<-ChronMaker(rings3800mrcs,\"3800m radial growth\")#This many: \" \nchronsrcs<-Reduce(function(x,y) rbind(x,y),list(chron32,chron35,chron38))\n##############################################################\n# #MAKE THE PLOTS only once\n# # writes fiel to pdf\n# pdf(file = \"3200m detrending.pdf\")\n# detrend(rings3200m,verbose=TRUE,make.plot = TRUE)\n# # turn device off to stop writing to pdf\n# dev.off()\n# \n# pdf(file = \"3500m detrending.pdf\")\n# detrend(rings3500m,verbose=TRUE,make.plot = TRUE)\n# dev.off()\n# \n# pdf(file = \"3800m detrending.pdf\")\n# detrend(rings3800m,verbose=TRUE,make.plot = TRUE)\n# dev.off()",
    "created" : 1461004679937.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1821631374",
    "id" : "98D134C0",
    "lastKnownWriteTime" : 1461092457,
    "path" : "C:/Users/Tower/Desktop/Sagebrush's response to Climate/R-code/Sagebrush Response to Climate R Studio Project/code/Dendro Processing.R",
    "project_path" : "code/Dendro Processing.R",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : true,
    "type" : "r_source"
}