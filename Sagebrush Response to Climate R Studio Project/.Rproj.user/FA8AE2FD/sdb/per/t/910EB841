{
    "contents" : "# Read in the QGIS data products. These were edited in excel to get them in the correct order and in separate files\nPre_P<-read.csv(\"pre-data/MonthlyPrecip 1962-2015.csv\", stringsAsFactors = FALSE)\nPre_T<-read.csv(\"pre-data/MonthlyTmean 1962-2015.csv\", stringsAsFactors = FALSE)\n\n# use a regular expression to get the index of all the columns named with exactly 6 digits ([[:digits:]]{6}) ( AKA monthly data as yearly data has only 4 digits)\ncol.i<-c(grep(\"[[:digit:]]{6}\",colnames(Pre_P)))\n\ncolnames(Pre_P)[col.i]\ncolnames(Pre_T)[col.i]\n\n#Format the PRISM data dataframe so they are ready to be combined to graph df #######################################################################\nmkdf<-function(PRISMdata, rowindex=1:length(PRISMdata[,1]),colindex=2:length(PRISMdata[1,]),PRISMtype,years,NameCol.i=\"\",divideby=1,Months=FALSE){  # divide by is the conversion of PRISM untis to full units. Usually it is in 100's of mm/C so should be divided by 100 by default\n  #browser()\n  #subset the df to proper indexes then divided by input:divideby(100) to get to mm\n  # transpose from horizontal to vertical and make the output of t() a dataframe instead of a matrix\n  WM32<-as.data.frame(t(PRISMdata[rowindex,colindex]/divideby))# for yearly\n \n############ last application of this function didn't use source  #####\n# #Create a new column that repeats the row name as the data source. THIS WILL show up on GGplot legend\n# WM32[\"Source\"]<-NA\n# # take first the name from the input row and 1st column and repeat it for the length of 1 row of the transposed dataframe\n  \n# # paste function is from when I had to add space to align graphs. number of spaces is in comments to the right.\n# WM32$Source<-rep(paste0(PRISMdata[rowindex,NameCol.i],\"\"),length(WM32[,1]))# changed 1 to 29 for TEMP PRISM DATA ALERT BE CAREFUL # NUMBER OF SPACES USED FOR WHITE MOUNTAIN PRECIP AND GROWTH GRAPH: \"                                                                                        \"\n###############  \n  # rename the column name to the generic variable being measured ( Precip)\n  names(WM32)[1]<-PRISMtype\n  \n  # If the arguments Months is true then we make the df with a months column and repeat each year by 12\n  if( Months){\n    #add a months column that is 1 through 12 repeated for the number of years there are\n    WM32[\"Month\"]<-rep(1:12,length(years))\n    \n    #repeat each year 12 times because there are 12 data points of each month for every year\n    years<-rep(years,each=12)\n    \n    # initialize the row column\n    WM32[\"Year\"]<-NA\n    \n    #fill it with the input years\n    WM32$Year<-years\n  }\n  else{\n    # initialize the row column\n    WM32[\"Year\"]<-NA\n    \n    #fill it with the input years\n    WM32$Year<-years\n  }\n  return(WM32)\n}\n\n#Make R dataframes for precip at each elevation\nWM32<-mkdf(Pre_P,20,col.i,PRISMtype = \"Precipitation\",years=1962:2015,Months = TRUE)\nWM35<-mkdf(Pre_P,21,col.i,PRISMtype = \"Precipitation\",years=1962:2015,Months = TRUE)\nWM38<-mkdf(Pre_P,6,col.i,PRISMtype =\"Precipitation\",years=1962:2015,Months = TRUE)\n\n\n#Make R dataframes for temp at each elevation\nTWM32<-mkdf(Pre_T,20,col.i,PRISMtype =\"Temperature\",years=1962:2015,Months = TRUE)\nTWM35<-mkdf(Pre_T,21,col.i,PRISMtype =\"Temperature\",years=1962:2015,Months = TRUE)\nTWM38<-mkdf(Pre_T,6,col.i,PRISMtype =\"Temperature\",years=1962:2015,Months = TRUE)\n\n# Subset Precipitation data to only the relevant years for the chronology\nMonthly3200mPrecipdf<-subset(x = WM32,subset = WM32$Year %in% chron32$Year)\nMonthly3500mPrecipdf<-subset(x = WM35,subset = WM35$Year %in% chron35$Year)\nMonthly3800mPrecipdf<-subset(x = WM38,subset = WM38$Year %in% chron38$Year)\n\n# Subset Temperature data to only the relevant years for the chronology\nMonthly3200mTempdf<-subset(x = TWM32,subset = WM32$Year %in% chron32$Year)\nMonthly3500mTempdf<-subset(x = TWM35,subset = WM35$Year %in% chron35$Year)\nMonthly3800mTempdf<-subset(x = TWM38,subset = WM38$Year %in% chron38$Year)\n\n# write the dataframes to csv files\nwrite.csv(Monthly3200mPrecipdf,\"data/Monthly3200mPrecipdf.csv\")\nwrite.csv(Monthly3500mPrecipdf,\"data/Monthly3500mPrecipdf.csv\")\nwrite.csv(Monthly3800mPrecipdf,\"data/Monthly3800mPrecipdf.csv\")\n\n#write the dataframes to csv files\nwrite.csv(Monthly3200mTempdf,\"data/Monthly3200mTempdf.csv\")\nwrite.csv(Monthly3500mTempdf,\"data/Monthly3500mTempdf.csv\")\nwrite.csv(Monthly3800mTempdf,\"data/Monthly3800mTempdf.csv\")\n",
    "created" : 1461351625026.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "17|66|23|290|\n",
    "hash" : "3108841141",
    "id" : "910EB841",
    "lastKnownWriteTime" : 1461359198,
    "path" : "C:/Users/Tower/Desktop/Sagebrush's response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/Convert QGIS product to R dataframe.R",
    "project_path" : "code/Convert QGIS product to R dataframe.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 7,
    "source_on_save" : true,
    "type" : "r_source"
}