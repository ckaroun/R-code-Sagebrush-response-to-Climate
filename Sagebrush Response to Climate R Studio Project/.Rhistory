getwd()
source('C:/Users/Tower/Desktop/R-code/Sagebrush Response to Climate Change/BarcroftStationToPRISMcorrelation.R')
savehistory("C:/Users/Tower/Desktop/R-code/Sagebrush Response to Climate Change/RprojTEst DELETEME.Rhistory")
source('C:/Users/Tower/Desktop/R-code/Sagebrush Response to Climate Change/BarcroftStationToPRISMcorrelation.R')
source('C:/Users/Tower/Desktop/R-code/Sagebrush Response to Climate Change/BarcroftStationToPRISMcorrelation.R')
warnings()
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/PRISMrecentdownloadEXTRACTandRENAME.R')
getwd()
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/PRISMrecentdownloadEXTRACTandRENAME.R')
setwd("C:/Users/Tower/Desktop/Sagebrush's response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project")
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/PRISMrecentdownloadEXTRACTandRENAME.R')
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/Download Extract and Rename PRISM 4k Data.R')
read.csv("pre-data/MonthlyPrecip 1962-2015.csv", stringsAsFactors = FALSE)
Pre-P<-read.csv("pre-data/MonthlyPrecip 1962-2015.csv", stringsAsFactors = FALSE)
Pre-T<-read.csv("pre-data/MonthlyTmean 1962-2015.csv", stringsAsFactors = FALSE)
Pre_P<-read.csv("pre-data/MonthlyPrecip 1962-2015.csv", stringsAsFactors = FALSE)
Pre_T<-read.csv("pre-data/MonthlyTmean 1962-2015.csv", stringsAsFactors = FALSE)
View(Pre_T)
Pre_T[6,1]
Pre_P[6,1]
Pre_P[20,1]
Pre_T[20,1]
Pre_T[21,1]
rep(2010:2015,12)
rep(2010:201512)
?rep
rep(2010:2015, each=12)
year<-rep(years,each=12)
years<-1962-2015
years<-1962:2015
years
year<-rep(years,each=12)
years
years<-rep(years,each=12)
years
rep(1:12,length(years))
# Read in the QGIS data products. These were edited in excel to get them in the correct order and in separate files
Pre_P<-read.csv("pre-data/MonthlyPrecip 1962-2015.csv", stringsAsFactors = FALSE)
Pre_T<-read.csv("pre-data/MonthlyTmean 1962-2015.csv", stringsAsFactors = FALSE)
#Format the PRISM data dataframe so they are ready to be combined to graph df #######################################################################
mkdf<-function(PRISMdata, rowindex=1:length(PRISMdata[,1]),colindex=1:length(PRISMdata[1,]),PRISMtype,years,NameCol.i="",divideby=100,Months=FALSE){  # divide by is the conversion of PRISM untis to full units. Usually it is in 100's of mm/C so should be divided by 100 by default
#browser()
#subset the df to proper indexes then divided by input:divideby(100) to get to mm
# transpose from horizontal to vertical and make the output of t() a dataframe instead of a matrix
WM32<-as.data.frame(t(PRISMdata[rowindex,colindex]/divideby))# for yearly
#Create a new column that repeats the row name as the data source. THIS WILL show up on GGplot legend
WM32["Source"]<-NA
# take first the name from the input row and 1st column and repeat it for the length of 1 row of the transposed dataframe
#   # paste function is from when I had to add space to align graphs. number of spaces is in comments to the right.
# last use didn't use source  WM32$Source<-rep(paste0(PRISMdata[rowindex,NameCol.i],""),length(WM32[,1]))# changed 1 to 29 for TEMP PRISM DATA ALERT BE CAREFUL # NUMBER OF SPACES USED FOR WHITE MOUNTAIN PRECIP AND GROWTH GRAPH: "                                                                                        "
# rename the column name to the generic variable being measured ( Precip)
names(WM32)[1]<-PRISMtype
# If the arguments Months is true then we make the df with a months column and repeat each year by 12
if( Months){
#add a months column that is 1 through 12 repeated for the number of years there are
WM32["Month"]<-rep(1:12,length(years))
#repeat each year 12 times because there are 12 data points of each month for every year
years<-rep(years,each=12)
# initialize the row column
WM32["Year"]<-NA
#fill it with the input years
WM32$Year<-years
}
else{
# initialize the row column
WM32["Year"]<-NA
#fill it with the input years
WM32$Year<-years
}
return(WM32)
}
#precip
WM32<-mkdf(Pre_P,20,"Precipitation",years=1962:2015,Months = TRUE)
WM35<-mkdf(Pre_P,21,"Precipitation",years=1962:2015,Months = TRUE)
WM38<-mkdf(Pre_P,6,"Precipitation",years=1962:2015,Months = TRUE)
#temp
TWM32<-mkdf(Pre_T,20,"Temperature",years=1962:2015,Months = TRUE)
TWM35<-mkdf(Pre_T,21,"Temperature",years=1962:2015,Months = TRUE)
TWM38<-mkdf(Pre_T,6,"Temperature",years=1962:2015,Months = TRUE)
# Read in the QGIS data products. These were edited in excel to get them in the correct order and in separate files
Pre_P<-read.csv("pre-data/MonthlyPrecip 1962-2015.csv", stringsAsFactors = FALSE)
Pre_T<-read.csv("pre-data/MonthlyTmean 1962-2015.csv", stringsAsFactors = FALSE)
#Format the PRISM data dataframe so they are ready to be combined to graph df #######################################################################
mkdf<-function(PRISMdata, rowindex=1:length(PRISMdata[,1]),colindex=1:length(PRISMdata[1,]),PRISMtype,years,NameCol.i="",divideby=100,Months=FALSE){  # divide by is the conversion of PRISM untis to full units. Usually it is in 100's of mm/C so should be divided by 100 by default
#browser()
#subset the df to proper indexes then divided by input:divideby(100) to get to mm
# transpose from horizontal to vertical and make the output of t() a dataframe instead of a matrix
WM32<-as.data.frame(t(PRISMdata[rowindex,colindex]/divideby))# for yearly
#Create a new column that repeats the row name as the data source. THIS WILL show up on GGplot legend
WM32["Source"]<-NA
# take first the name from the input row and 1st column and repeat it for the length of 1 row of the transposed dataframe
#   # paste function is from when I had to add space to align graphs. number of spaces is in comments to the right.
# last use didn't use source  WM32$Source<-rep(paste0(PRISMdata[rowindex,NameCol.i],""),length(WM32[,1]))# changed 1 to 29 for TEMP PRISM DATA ALERT BE CAREFUL # NUMBER OF SPACES USED FOR WHITE MOUNTAIN PRECIP AND GROWTH GRAPH: "                                                                                        "
# rename the column name to the generic variable being measured ( Precip)
names(WM32)[1]<-PRISMtype
# If the arguments Months is true then we make the df with a months column and repeat each year by 12
if( Months){
#add a months column that is 1 through 12 repeated for the number of years there are
WM32["Month"]<-rep(1:12,length(years))
#repeat each year 12 times because there are 12 data points of each month for every year
years<-rep(years,each=12)
# initialize the row column
WM32["Year"]<-NA
#fill it with the input years
WM32$Year<-years
}
else{
# initialize the row column
WM32["Year"]<-NA
#fill it with the input years
WM32$Year<-years
}
return(WM32)
}
#precip
WM32<-mkdf(Pre_P,20,PRISMtype = "Precipitation",years=1962:2015,Months = TRUE)
WM35<-mkdf(Pre_P,21,PRISMtype = "Precipitation",years=1962:2015,Months = TRUE)
WM38<-mkdf(Pre_P,6,PRISMtype ="Precipitation",years=1962:2015,Months = TRUE)
#temp
TWM32<-mkdf(Pre_T,20,PRISMtype ="Temperature",years=1962:2015,Months = TRUE)
TWM35<-mkdf(Pre_T,21,PRISMtype ="Temperature",years=1962:2015,Months = TRUE)
TWM38<-mkdf(Pre_T,6,PRISMtype ="Temperature",years=1962:2015,Months = TRUE)
PRISMdata[rowindex,colindex]
PRISMdata<-Pre_P
PRISMdata[rowindex,colindex]
rowindex<-1:length(PRISMdata[,1])
rm(c(rowindex,PRISMdata))
rm(c("rowindex","PRISMdata"))
rm(list("rowindex","PRISMdata"))
rm("rowindex","PRISMdata")
?rm
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/Convert QGIS product to R dataframe.R')
PRISMdata
str(PRISMdata)
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/Convert QGIS product to R dataframe.R')
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/Convert QGIS product to R dataframe.R')
View(Pre_P)
View(Pre_T)
col.i<-c(grep("[[:allnum:]]{6}",colnames(Pre_P)))
col.i<-c(grep("[:allnum:]{6}",colnames(Pre_P)))
rownames(Pre_P)[col.i]
col.i<-c(grep("[:allnum:]{6}",colnames(Pre_P)))
colnames(Pre_P)[col.i]
colnames(Pre_P)
grep("[:allnum:]{6}",colnames(Pre_P)
)
col.i<-c(grep("[:digit:]{6}",colnames(Pre_P)))
colnames(Pre_P)[col.i]
grep("[:digit:]{6}",colnames(Pre_P)
)
col.i<-c(grep("[[:digit:]]{6}",colnames(Pre_P)))
colnames(Pre_P)[col.i]
colnames(Pre_T)[col.i]
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/Convert QGIS product to R dataframe.R')
View(WM32)
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/Convert QGIS product to R dataframe.R')
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/Convert QGIS product to R dataframe.R')
View(WM32)
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/Dendro Processing.R')
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/LinearModel Maybe PRE MESS-UP.R')
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/LinearModel Maybe PRE MESS-UP.R')
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/LinearModel Maybe PRE MESS-UP.R')
Precipdf[p.row.i,1]
chrons[c.row.i,1]
-chrons[,2]==CSource[i]
chrons[,2]
==CSource[i]
CSource[i]
chrons[,2]==CSource[i]
chrons[,3]
Precipdf[p.row.i,3]
CSource[i]& chrons[,3] %in% Precipdf[p.row.i,3]
chrons[,2]==CSource[i]& chrons[,3] %in% Precipdf[p.row.i,3]
Precipdf[,3]%in% chrons[chrons[,2]==CSource[i],3]
chrons[chrons[,2]==CSource[i],3]
Precipdf[,3]
PSource[i]
Precipdf[,2]
Precipdf[,2]==PSource[i] & Precipdf[,3]%in% chrons[chrons[,2]==CSource[i],3]
Precipdf[p.row.i,3]
chrons[,2]==CSource[i]& chrons[,3] %in% Precipdf[p.row.i,3]
chrons[c.row.i,3]
Precipdf[p.row.i,1]
chrons[c.row.i,1]
p.row.i<-Precipdf[,2]==PSource[i] & Precipdf[,3]%in% chrons[chrons[,2]==CSource[i],3]
c.row.i<-chrons[,2]==CSource[i]& chrons[,3] %in% Precipdf[p.row.i,3]#doesn't need & Wdf[,3]%in% Cdf[,3] because years overlap with themselves! #example name: "3200m radial growth                                                                            "
Precipdf[p.row.i,1]
chrons[c.row.i,1]
sum(p.row.i)
sum(c.row.i)
Precipdf[,1]
Precipdf[,3]
n
#LOOK AT INTERACTION
### [plot mean effect]
# compute the slope for Ring Growth on Precip while holding the moderator variable Temp at constant valuesrange of Temp which we will hold
# to do this find the total coefficient for Precip in the model equation for each value of Temp
# this is the equation Y=b0+b1*P+b2*T+b3*TP
summary(Tempdf[c.row.i,1])
at.temp<- seq(-.2,1.75,.25)
slopes<- M3200m$coef[2]+ M3200m$coef[4]*at.temp
plot(at.temp,slopes,type="l",lty=1, xlab="Level of Temp(C)",ylab= "Marginal Effect of Precip (total coefficient)")
abline(h=0,col="grey")
### [plot mean effect]
# compute the slope for Ring Growth on Precip while holding the moderator variable Temp at constant valuesrange of Temp which we will hold
# to do this find the total coefficient for Precip in the model equation for each value of Temp
# this is the equation Y=b0+b1*P+b2*T+b3*TP
summary(Precipdf[c.row.i,1])
at.precip<- seq(0,700,50)
slopes<- M3200m$coef[3]+ M3200m$coef[4]*at.precip
plot(at.precip,slopes,type="l",lty=1, xlab="Level of Precip(mm)",ylab= "Marginal Effect of Temp (total coefficient)")
abline(h=0,col="grey")
summary(M3200m)
summary(M3500m)
summary(M3800m)
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/Dendro Processing.R')
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/Dendro Processing.R')
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/LinearModel Maybe PRE MESS-UP.R')
summary(M3200m)
summary(M3500m)
summary(M3800m)
source('C:/Users/Tower/Desktop/Sagebrush\'s response to Climate/R-code Sagebrush response to Climate/Sagebrush Response to Climate R Studio Project/code/Convert QGIS product to R dataframe.R')
# Load (read) into R the PRISM Climate data I sent out
# and store (<-) the data as the variable Precip3200; Precip3500; Precip3800
Precip3200m<-read.csv("C:/Users/Tower/Downloads/Monthly3200mPrecipdf.csv") # Change the filepath in the quotations to where the Monthly3200m csv file is on your computer. For example it might be in your downloads folder: C:/Users/Tower/Downloads/
Precip3500m<-read.csv("C:/Users/Tower/Downloads/Monthly3500mPrecipdf.csv") # Do the same thing for all the Monthly-Precip data files
Precip3800m<-read.csv("C:/Users/Tower/Downloads/Monthly3800mPrecipdf.csv")
Temp3200m<-read.csv("C:/Users/Tower/Downloads/Monthly3200mTempdf.csv")# And also the Monthly-Temp data files
Temp3500m<-read.csv("C:/Users/Tower/Downloads/Monthly3500mTempdf.csv")# Remember to change all the filepaths to where you have the files
Temp3800m<-read.csv("C:/Users/Tower/Downloads/Monthly3800mTempdf.csv")
# For the next part we need to use a function (read.rwl) that is not part of the standard "base" developement of R so we have to install the package called "dplR"
install.packages("dplR")
# Now that the dplR package is installed we need tell R that we want to use it in the current code document (TreeRingMeeting.R)
library(dplR)
# Load (read) into R the Sagebrush chronologies that were made in Cdendro
Rings3200m<-read.rwl("C:/Users/Tower/Downloads/3200mSagebrushRings.rwl") # The chronologies were grouped by elevation.
Rings3500m<-read.rwl("C:/Users/Tower/Downloads/3500mSagebrushRings.rwl") # Load (read) the other two chronologies at 3500m and 3800m above sea level
Rings3800m<-read.rwl("C:/Users/Tower/Downloads/3500mSagebrushRings.rwl")
?lm
Rings3200m<-read.rwl("C:/Users/Tower/Downloads/3200mSagebrushRings.rwl") # The chronologies were grouped by elevation.
Rings3500m<-read.rwl("C:/Users/Tower/Downloads/3500mSagebrushRings.rwl") # Load (read) the other two chronologies at 3500m and 3800m above sea level
Rings3800m<-read.rwl("C:/Users/Tower/Downloads/3500mSagebrushRings.rwl")
#transpose the dataframe of ring values so that we can subset it by year easily
Rings3200m<-as.matrix(Rings3200m)
Rings3200m
linearModel3200m<- lm(formula = Rings3200m~ Precip3200m)
str(Precip3200m)
install.packages("dplyr")
